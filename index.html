<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Weather API</title>
  </head>
  <body>
    <header>Search for city:</header><br>
    <div id="Searchbar">
        
        <form>   
            <input type="text" id="city" placeholder="Enter City"></input>
            <button type="submit" id="searchbutton">Search</button> 
        </form> 
    </div>
        
        <div id="searchHistory" class="containerHistory">
            <h1>Previous Searchs</h1>
        </div>

        <div id="weather">
            <h2>Current weather: </h2>
        </div>
        
        <div id="forecast">
            <h2>Forecast: </h2>
        </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

    $("button").on("click", function(event) {
        
        event.preventDefault()
        var weather = $("#city").val().trim();
        var queryURL = "https://api.openweathermap.org/data/2.5/forecast?q=" +
        weather + "&appid=042f8dc68822149a937e95a8743d8066";

        $.ajax({
            url: queryURL,
            method: "GET"
        })

        .then(function(response) {
            console.log(response);
            
            var forecastDiv = $("<div>"); 
            var forecast = [response.list[0], response.list[8], response.list[16], response.list[24], response.list[32]];
            for(let i = 0; i < forecast.length; i++) {
                var day = $("<h3>").text("Day " + i + ":");
                var weatherdes = $("<p>").text("Weather: " + forecast[i].weather[0].description);
                var clouds = $("<p>").text("Clouds: " + forecast[i].clouds.all);
                var temp = $("<p>").text("Temp: " + forecast[i].main.temp_kf);
                var humidity = $("<p>").text("Humidity: " + forecast[i].main.humidity);

                forecastDiv.append(day).append(weatherdes).append(clouds).append(temp).append(humidity);

                $("#forecast").append(forecastDiv);
            } 

            var currentWeather = $("#city").val().trim();
            var queryURL = "http://api.openweathermap.org/data/2.5/weather?q=" +
            currentWeather + "&appid=042f8dc68822149a937e95a8743d8066";

            $.ajax({
                url: queryURL,
                method: "GET"
            })
            

        });
    });

     </script>

  </body>
</html>